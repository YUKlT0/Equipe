B
## 3. 機能設計

### 3.1. 機能一覧

- **認証機能**
    - ログイン/ログアウト機能
    - ユーザー情報登録機能
    - マイページ、登録情報表示、変更
- **商品表示機能**
    - 商品一覧ページ・カテゴリ別商品一覧表示
    - 商品詳細ページ・商品ID、写真、価格、素材、納期予定表示機能
    - 無限スクロール方式により商品表示件数を制御
- **カート機能**
    - 商品追加機能・商品削除機能・商品数量編集機能・カートアイコン反映機能
    - カート内商品表示機能
    - カート状態保持機能（セッション/ローカルストレージ対応）
    - 未ログイン状態でもカートを維持
- **注文機能**
    - 個人情報入力機能・入力確認画面表示
    - 注文情報
- **スマホ対応機能**
    - ページでレイアウト最適化表示・スマホ特有のUI機能
    - 
- **商品管理機能(管理者向け)**
    - 商品情報追加、削除機能・編集入力機能
    - 注文情報確認機能
  

### 3.2. 機能構成図

<div class="mermaid">
graph TD
    A[ECサイト全体]

    %% 各機能ノード
    A --> B[認証機能]
    A --> C[商品表示機能]
    A --> D[カート機能]
    A --> E[注文機能]
    A --> F[スマホ対応機能]
    A --> Z[管理者専用機能]

    %% 認証機能
    subgraph 認証機能
        B1[ログイン]
        B2[ログアウト]
        B3[ユーザー登録]
        B4[マイページ閲覧・編集]
    end
    B --> B1
    B --> B3
    B --> B4
    B --> B2

    %% 商品表示機能
    subgraph 商品表示機能
        C1[商品一覧]
        C2[カテゴリ別表示]
        C4[商品詳細]
    end
    C --> C1 --> C2 --> C4

    %% カート機能
    subgraph カート機能
        D1[商品追加・削除・数量変更]
        D2[カート内表示]
        D3[アイコン反映]
        D4[未ログインでも保持]
    end
    D --> D1 --> D2 --> D4
    D1 --> D3

    %% 注文機能
    subgraph 注文機能
        E1[個人情報入力（未ログイン時）]
        E2[入力確認]
        E3[注文確定]
        E4[注文ID・ステータス管理]
        E5[マイページからの注文（自動入力）]
    end
    E --> E1 --> E2 --> E3 --> E4
    B4 --> E5
    E5 --> E3
    %% スマホ対応機能
    subgraph スマホ対応機能
        F1[レスポンシブ最適化]
        F2[スマホ専用UI]
        F3[タップ優先レイアウト]
    end
    F --> F1
    F --> F2
    F --> F3

    %% 管理者機能
    subgraph 管理者専用機能
        G1[商品情報追加・削除]
        G2[商品編集]
        G3[注文情報確認]
    end
    Z --> G1
    Z --> G2
    Z --> G3

    %% フローとの整合リンク（コメント）
    B --> C
    B --> D
    B --> E

    C4 --> D1
    D4 --> E1

    F --> C
    F --> D
    F --> E
</div>

## 3.3. 主要機能フロー

システムで行われる代表的な業務フローを示す。

#### 3.3.1. ECサイト一般ユーザー利用フロー

<div class="mermaid">
sequenceDiagram
participant ユーザー as ECサイト利用者
participant サイト as ECサイト

alt 任意のタイミングでログイン
    ユーザー -->> サイト: ログイン
    サイト -->> ユーザー: 認証結果・マイページリンク表示
end

ユーザー ->> サイト: 商品ページにアクセス
サイト ->> ユーザー: 商品一覧を表示

ユーザー ->> サイト: 商品検索・カテゴリ選択
サイト ->> ユーザー: カテゴリ別商品一覧を表示

ユーザー ->> サイト: 商品を選択
サイト ->> ユーザー: 商品詳細ページを表示
ユーザー ->> サイト: 商品をカートに追加

alt 任意のタイミングでログイン
    ユーザー -->> サイト: ログイン
    サイト -->> ユーザー: 認証結果・マイページリンク表示
end

ユーザー ->> サイト: カート内容を確認
サイト ->> ユーザー: 商品一覧・金額を表示

ユーザー ->> サイト: 購入手続き開始（個人情報入力）
サイト ->> ユーザー: 入力確認画面を表示（キャンセル不可の注意あり）
ユーザー ->> サイト: 注文確定



</div>

#### 3.3.2. ECサイト管理者利用フロー
<div class="mermaid">
sequenceDiagram
participant 管理者 as 管理者
participant 管理画面 as 管理者画面
participant DB as ECサイト

alt 商品を新しく追加したいとき
    管理者 ->> 管理画面: 「新規商品追加」画面を開く
    管理者 ->> 管理画面: 商品名・価格・説明・画像を入力
    管理画面 ->> DB: 商品情報を登録
    DB ->> 管理画面: 登録成功レスポンス
    管理画面 ->> 管理者: 商品を追加しました
end

alt 商品情報を変更したいとき
    管理者 ->> 管理画面: 商品一覧から対象商品を選択
    管理者 ->> 管理画面: 編集内容を入力（例：価格、説明、画像など）
    管理画面 ->> DB: 商品情報を更新
    DB ->> 管理画面: 更新完了レスポンス
    管理画面 ->> 管理者: 商品情報を更新しました
end

alt 商品を削除（非公開）したいとき
    管理者 ->> 管理画面: 商品一覧から削除対象を選択
    管理者 ->> 管理画面: 「削除」または「公開停止」を実行
    管理画面 ->> DB: 対象商品を削除または非表示フラグを更新
    DB ->> 管理画面: 処理完了レスポンス
    管理画面 ->> 管理者: 商品を削除・非公開にしました
end
</div>
