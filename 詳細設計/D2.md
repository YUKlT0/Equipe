## 9. API詳細

| 機能カテゴリ         | 機能               | メソッド | エンドポイント                          | 概要                          |
|----------------------|--------------------|----------|---------------------------------------|-------------------------------|
| 1. 会員関連          | 会員登録           | POST     | /api/customers/register                | 新規会員の登録                 |
|                      | ログイン           | POST     | /api/auth/login                       | メールアドレス＋パスワードでログイン |
|                      | ログアウト         | POST     | /api/auth/logout                      | セッションまたはトークンの無効化      |
|                      | 会員情報取得（マイページ） | GET      | /api/customers/me                     | ログイン中の会員情報取得         |
|                      | 会員情報更新       | PUT      | /api/customers/me                     | 氏名・住所などの情報を更新       |
| 2. 商品関連          | 商品一覧取得       | GET      | /api/products                        | 商品の一覧を取得               |
|                      | 商品詳細取得       | GET      | /api/products/{productId}            | 商品の詳細を取得               |
|                      | 商品画像追加       | POST     | /api/admin/products/{productId}/images | 商品画像を追加                 |
| 3. カテゴリ関連      | カテゴリ一覧       | GET      | /api/categories                      | カテゴリリストを取得           |
|                      | カテゴリ新規登録   | POST     | /api/admin/categories                | 新規カテゴリの登録             |
|                      | カテゴリ更新       | PUT      | /api/admin/categories/{categoryId}  | カテゴリ情報更新               |
|                      | カテゴリ削除       | DELETE   | /api/admin/categories/{categoryId}  | カテゴリ削除                 |
| 4. 注文関連（ユーザー側） | 注文登録           | POST     | /api/orders                         | 商品購入処理（注文確定）         |
| 5. カート関連（サーバー保持） | カート内容取得     | GET      | /api/cart                          | カートの中身を取得             |
|                      | カート商品追加     | POST     | /api/cart/products                    | カートに商品を追加             |
|                      | カート商品更新     | PUT      | /api/cart/products/{productId}           | カート内商品の数量や属性を更新    |
|                      | カート商品削除     | DELETE   | /api/cart/products/{productId}           | カート内の商品を削除           |
| 6. 管理者関連        | 管理者ログイン     | POST     | /api/admin/auth/login               | 管理者用ログイン               |
|                      | 管理者ログアウト   | POST     | /api/admin/auth/logout              | 管理者用ログアウト             |
|                      | 商品登録           | POST     | /api/admin/products                | 商品を新規登録                 |
|                      | 商品編集           | PUT      | /api/admin/products/{productId}    | 商品情報を更新                |
|                      | 注文一覧取得       | GET      | /api/admin/orders                  | 全注文の一覧を取得            |
|                      | 注文詳細取得       | GET      | /api/admin/orders/{orderId}        | 注文の詳細を取得              |

---

### ■ 商品詳細取得API

#### エンドポイント  
`GET /api/products/{productId}`

#### 機能概要  
指定された商品IDの商品詳細情報を取得するAPI。

#### パスパラメータ

| パラメータ名 | 型   | 必須 | 説明                     |
| ------------ | ---- | ---- | ------------------------ |
| productId    | 数値 | 必須 | 詳細を取得したい商品のID |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "id": 101,
  "name": "オリジナルTシャツ",
  "description": "シンプルなデザインのTシャツです。",
  "price": 2500,
  "category": {
    "id": 5,
    "name": "アパレル"
  },
  "images": [
    "https://example.com/images/product101_1.jpg",
    "https://example.com/images/product101_2.jpg"
  ]
  }

  {
  "message": "指定された商品IDが存在しません。"
  }
```

**処理概要**
  - productId に対応する商品をデータベースから検索

  - 商品が存在しない場合は 404 を返却

  - 商品情報（カテゴリ、画像含む）を整形して返却

**備考**
  - 非ログイン状態でも使用可能

  - 商品が非公開などの条件がある場合、追加の制御が必要
 
--- 

### ■ ログインAPI

#### エンドポイント  
`POST /api/auth/login`

#### 機能概要  
ユーザーがメールアドレスとパスワードを使用してログインするAPI。  
認証成功時にセッション開始またはトークンを返却する。

#### リクエストパラメータ（JSON形式）

```json
{
  "user_email": "string",      // 必須、登録済みメールアドレス
  "user_password": "string"    // 必須、登録済みユーザーの正しいパスワード
}
 {
  "message": "ログイン成功",
  "token": "xxxxx.yyyyy.zzzzz",   // トークン認証方式の場合（JWTなど）
  "customer": {
    "user_id": "user1234",
    "membership": "true"
  }
}
{
  "message": "メールアドレスまたはパスワードが正しくありません。"
}
 ```

---

### ■ ログアウトAPI

#### エンドポイント  
`POST /api/auth/logout`

#### 機能概要  
現在のログインセッションまたは認証トークンを無効化し、ログアウト状態にする。

#### リクエストパラメータ  
なし  
※ただし、認証トークンまたはセッションクッキーをヘッダーで送信する必要がある。

#### ヘッダー例（トークン認証の場合）

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "message": "ログアウトしました。"
}

 {
  "message": "認証されていません。"
}
 ```
**処理概要**
- JWT方式の場合：クライアント側でトークン破棄（サーバー側に状態を持たない）

- セッション方式の場合：サーバー側でセッションを破棄（invalidate）

- トークンブラックリスト方式を採用する場合は、トークンを無効リストに保存する

**備考**
  -クライアントはログアウト後にトークンやセッションクッキーを削除する必要がある。

- フロントエンド側はこのAPIのレスポンスを受けてログイン状態を解除する。

---

### ■ 会員情報取得API（マイページ用）

#### エンドポイント  
`GET /api/customers/me`

#### 機能概要  
ログイン中の会員自身の情報を取得する。マイページ表示などに使用。

#### リクエストパラメータ  
なし  
※ただし、認証情報（セッションまたはJWT）をヘッダーで送信すること。

#### ヘッダー例（JWTトークンを用いる場合）

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "user_id": "abc12345",
  "user_name": "山田 太郎",
  "user_email": "taro@example.com",
  "user_address": "東京都港区南青山1-1-1",
  "member_since": "2024-06-01"
}

 {
  "message": "認証されていません。"
}
 ```
**処理概要**
トークンまたはセッションから現在のユーザーを特定

該当するユーザーの情報（会員ID、氏名、メールアドレス、住所、登録日時など）を取得して返却

**備考**
会員情報編集画面やマイページ初期表示時に利用

パスワードなどの機密情報はレスポンスに含めない

---

### ■ 会員情報更新API

#### エンドポイント  
`PUT /api/customers/me`

#### 機能概要  
ログイン中の会員が、自身の情報（氏名・住所など）を更新する。

#### リクエストパラメータ（JSON形式のBody）

```json
{
  "user_name": "山田 太郎",
  "user_address": "東京都港区南青山1-1-1"
}

 必須項目
user_name：氏名（文字列、最大100文字）

user_address：住所（文字列、最大255文字）
Authorization: Bearer <token>  
Content-Type: application/json
{
  "errors": {
    "user_name": "氏名は必須です。",
    "user_address": "住所は255文字以内で入力してください。"
  }
}
{
  "message": "認証されていません。"
}
 ```
**処理概要**
- 認証済みのユーザーを識別

- 入力値のバリデーションを実施

- 会員テーブルの対象レコードを更新

- 成功メッセージを返却

**備考**
- メールアドレスやパスワードの更新は別APIで対応（セキュリティ上の理由）

- 更新不可のフィールド（例：会員ID、登録日時など）は受け付けない

---

### ■ 商品一覧取得API

#### エンドポイント  
`GET /api/products`

#### 機能概要  
商品一覧を取得する。無限スクロール対応。  
順番指定やページ番号の指定、表示件数の制御は行わない。

#### リクエストパラメータ  
なし

#### 成功レスポンス（HTTP 200 OK）

```json
[
  {
    "product_id": 101,
    "product_name": "スマートフォン X",
    "price": 59800,
    "thumbnail_url": "https://example.com/images/101-thumb.jpg",
    "category_id": 5,
  },
  {
    "product_id": 102,
    "product_name": "スマートフォン Y",
    "price": 49800,
    "thumbnail_url": "https://example.com/images/102-thumb.jpg",
    "category_id": 5,
  }
  // 以下略
]
 {
  "message": "商品情報の取得に失敗しました。"
}
 ```
**処理概要**
- データベースから商品情報を全件取得

- 商品の表示順や件数制御は行わない（フロント側でスクロール表示を制御）

**備考**
- 商品は受注販売形式のため、在庫情報は参考値

- 無限スクロールに対応しているが、サーバ側では特別なページング制御を行わない

- レスポンスは配列形式で返却する

---

### ■ 商品画像追加API

#### エンドポイント  
`POST /api/admin/products/{productId}/images`

#### 機能概要  
指定した商品IDに対して、新しい商品画像を追加する。

#### パスパラメータ

| パラメータ名 | 型   | 必須 | 説明                            |
|--------------|------|------|---------------------------------|
| productId    | 数値 | 必須 | 画像を追加する対象の商品ID      |

#### リクエストボディ（multipart/form-data）

| フィールド名 | 型       | 必須 | 説明                                     |
|--------------|----------|------|------------------------------------------|
| image_file   | ファイル | 必須 | アップロードする画像ファイル（jpg, png等） |

#### 成功レスポンス（HTTP 201 Created）

```json
{
  "message": "画像が正常に追加されました。",
  "image_url": "https://example.com/images/101-new.jpg"
}
 {
  "message": "画像ファイルが不正です。"
}
{
  "message": "指定された商品が存在しません。"
}
 ```
**処理概要**
- productId の存在チェック

- アップロード画像のファイル形式チェック（jpg, png のみ許可）

- 画像ファイルの保存（ファイル名は自動生成が望ましい）

- 商品の画像リストに新しい画像URLを追加

**備考**
- 本APIは 管理者権限 が必要

- 複数回の画像追加をサポート（画像の追加上限や順序管理は別途検討）

---

### ■ カテゴリ一覧取得API

#### エンドポイント  
`GET /api/categories`

#### 機能概要  
登録されているカテゴリの一覧を取得する。

#### リクエストパラメータ  
なし

#### 成功レスポンス（HTTP 200 OK）

```json
[
  {
    "category_id": 1,
    "category_name": "スマートフォン"
  },
  {
    "category_id": 2,
    "category_name": "パソコン"
  },
  {
    "category_id": 3,
    "category_name": "アクセサリー"
  }
]
 {
  "message": "カテゴリ情報の取得に失敗しました。"
}
 ```
**処理概要**
- カテゴリマスタテーブルから全件を取得

- 取得結果を一覧形式で返却

**備考**
- 一般ユーザーも閲覧可能

- カテゴリ順は登録順、または別途定義された表示順に従う


### ■ カテゴリ新規登録API

#### エンドポイント  
`POST /api/admin/categories`

#### 機能概要  
新しいカテゴリを登録する（管理者専用機能）。

#### リクエストボディ（JSON）

```json
{
  "category_name": "スマートウォッチ"
}

 バリデーション
category_name：必須、50文字以内、同名カテゴリが存在しないこと
{
  "message": "カテゴリが登録されました。",
  "category_id": 123
}
{
  "message": "カテゴリ名は必須です。"
}
{
  "message": "同じカテゴリ名が既に存在します。"
}
 ```
**処理概要**
- 管理者認証の確認

- 入力値バリデーション（必須・文字数制限・重複確認）

- DBへ新しいカテゴリを登録

- 登録されたカテゴリIDを返却

**備考**
- 管理者権限を持つユーザーのみ利用可能

---

### ■ カテゴリ情報更新API

#### エンドポイント  
`PUT /api/admin/categories/{categoryId}`

#### 機能概要  
指定したカテゴリの情報を更新する（管理者専用）。

#### パスパラメータ

| パラメータ名 | 型   | 必須 | 説明                    |
|--------------|------|------|-------------------------|
| categoryId   | 数値 | 必須 | 更新対象のカテゴリID    |

#### リクエストボディ（JSON）

```json
{
  "category_name": "スマートデバイス"
}
 バリデーション
category_name：必須、50文字以内、同名カテゴリが存在しないこと
{
  "message": "カテゴリ情報を更新しました。"
}
{
  "message": "カテゴリ名は必須です。"
}
{
  "message": "指定されたカテゴリが存在しません。"
}
 ```
**処理概要**
- 管理者認証の確認

- categoryId の存在確認

- 入力値のバリデーション

- カテゴリ名の重複チェック

- カテゴリ情報をデータベース上で更新

**備考**
- 管理者権限を持つユーザーのみ利用可能

---

### ■ カテゴリ削除API

#### エンドポイント  
`DELETE /api/admin/categories/{categoryId}`

#### 機能概要  
指定したカテゴリを削除する（管理者専用）。

#### パスパラメータ

| パラメータ名 | 型   | 必須 | 説明                  |
|--------------|------|------|-----------------------|
| categoryId   | 数値 | 必須 | 削除対象のカテゴリID  |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "message": "カテゴリを削除しました。"
}

 {
  "message": "指定されたカテゴリが存在しません。"
}
{
  "message": "紐づく商品が存在するため、削除できません。"
}
 ```
**処理概要**
- 管理者認証を確認

- categoryId の存在を確認

- 関連する商品などの依存関係をチェック（存在する場合は削除不可）

- 問題がなければカテゴリを削除

**備考**
- 本APIは管理者権限を有するユーザーのみ利用可能

---

### ■ 注文登録API（ユーザー側）

#### エンドポイント  
`POST /api/orders`

#### 機能概要  
カート内の商品をもとに注文を確定し、注文情報を登録する。  
注文確定後、在庫数を更新する。

#### リクエストボディ（JSON形式）

```json
{
  "customer_id": "string",
  "order_items": [
    {
      "product_id": "string",
      "quantity": 1
    }
  ],
  "buyer_name": "string",
  "buyer_address": "string",
  "buyer_email": "string",
  "ship_name": "string or null",
  "ship_address": "string or null",
  "pay_method": "string"
}

 パスパラメータ
なし
{
  "order_id": "string",
  "message": "注文が正常に登録されました。"
}
{
  "message": "入力値が不正です。"
}
{
  "message": "認証されていません。"
}
{
  "message": "注文処理中にエラーが発生しました。"
}
 ```
**処理概要**
- ログイン認証（会員の場合）

- 入力値のバリデーションチェック

- 注文情報のDB登録（ORDERテーブル、ORDER_DETAILテーブルなど）

- 注文完了通知メールの送信（必要に応じて）

**備考**
非会員の注文も可能（customer_idは空またはnull）

- 注文登録はトランザクション処理として一括管理すること

---

### ■ カート内容取得API

#### エンドポイント  
`GET /api/cart`

#### 機能概要  
ログインユーザーまたはセッションのカートに入っている商品情報を取得する。

#### パスパラメータ  
なし

#### クエリパラメータ  
なし

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "cart_items": [
    {
      "item_id": "string",
      "product_id": "string",
      "product_name": "string",
      "quantity": 1,
      "price": 1000,
      "image_url": "string"
    }
  ],
  "total_quantity": 3,
  "total_price": 3000
}
 {
  "message": "認証されていません。"
}
{
  "message": "カート情報の取得に失敗しました。"
}
 ```
**処理概要**
- ユーザー認証またはセッションIDによる識別

- カート情報の取得（DBまたはセッションストア）

- 商品情報の補完と合計数量・金額の集計

- レスポンスを整形して返却

**備考**
- 非会員ユーザーの場合はセッションベースでカートを管理する

- 削除された商品などが含まれる場合は自動で除外するのが望ましい

---

### ■ 商品詳細取得API

#### エンドポイント  
`GET /api/products/{productId}`

#### 機能概要  
指定された商品IDの商品詳細情報を取得する。

#### パスパラメータ

| パラメータ名 | 型   | 必須 | 説明                      |
|--------------|------|------|---------------------------|
| productId    | 数値 | 必須 | 詳細を取得したい商品のID  |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "id": 101,
  "name": "オリジナルTシャツ",
  "description": "シンプルなデザインのTシャツです。",
  "price": 2500,
  "stock": 10,
  "category": {
    "id": 5,
    "name": "アパレル"
  },
  "images": [
    "https://example.com/images/product101_1.jpg",
    "https://example.com/images/product101_2.jpg"
  ]
}
 ```
| ステータスコード      | 内容                |
| ------------- | ----------------- |
| 404 Not Found | 指定された商品IDが存在しない場合 |
**処理概要**

- productId に対応する商品をデータベースから検索

- 商品が存在しない場合は 404 を返却

- 商品情報（カテゴリ、画像含む）を整形して返却

**備考**

- 非ログイン状態でも使用可能

- 商品が非公開などの条件がある場合、追加の制御が必要

---

### ■ カート商品追加API

#### エンドポイント  
`POST /api/cart/products`

#### 機能概要  
指定した商品をカートに追加する。

#### リクエストボディ（JSON）

```json
{
  "productId": 101,
  "quantity": 2
}
 ```
| ステータスコード        | 内容                            |
| --------------- | ----------------------------- |
| 400 Bad Request | productId または quantity が不正な場合 |
| 404 Not Found   | 指定された `productId` が存在しない |

**処理概要**

- 認証済みユーザーのセッション・トークンを確認

- 既にカートに存在していれば数量を加算、なければ新規追加

- カートの状態を返却

**備考**

- ユーザーはログインしている必要があります

- サーバー側のカート情報を操作します（クッキー等は使用しません）

---

### ■ カート商品更新API

#### エンドポイント  
`PUT /api/cart/products/{productId}`

#### 機能概要  
カート内にある指定商品の数量や属性（オプションがあれば）を更新する。

#### パスパラメータ

| パラメータ名 | 型   | 必須 | 説明             |
|--------------|------|------|------------------|
| productId       | 数値 | 必須 | 更新対象のカート内商品ID |

#### リクエストボディ（JSON）

```json
{
  "quantity": 3
}
| パラメータ名   | 型  | 必須 | 説明          |
| -------- | -- | -- | ----------- |
| quantity | 数値 | 必須 | 更新後の数量（1以上） |
{
  "message": "カートの商品を更新しました。",
  "cartItem": {
    "productId": 301,
    "productId": 101,
    "quantity": 3
  }
}
 ```
| ステータスコード        | 内容                    |
| --------------- | --------------------- |
| 400 Bad Request | リクエスト形式不正、または数量が不正    |
| 404 Not Found   | 指定された `productId` が存在しない |

**処理概要**
- ログイン状態の確認

- 対象 productId の存在確認

- 指定された数量に更新

- 更新後のカート情報を返却

**備考**
- 商品属性（例：サイズ・カラー）変更も対応する場合は設計拡張を検討

---

### ■ カート商品削除API

#### エンドポイント  
`DELETE /api/cart/products/{productId}`

#### 機能概要  
指定されたカート内の商品を削除する。

#### パスパラメータ

| パラメータ名 | 型   | 必須 | 説明                   |
|--------------|------|------|------------------------|
| productId       | 数値 | 必須 | 削除対象のカート商品ID |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "message": "カートの商品を削除しました。"
}
 ```
| ステータスコード         | 内容                    |
| ---------------- | --------------------- |
| 404 Not Found    | 指定された `productId` が存在しない |

**処理概要**
- 該当 productId がユーザーのカートに存在するか確認

- カートから該当商品を削除

- 成功メッセージを返却

---

### ■ 管理者ログインAPI

#### エンドポイント  
`POST /api/admin/auth/login`

#### 機能概要  
管理者アカウントによるログイン認証を行い、セッションまたはトークンを発行する。

#### リクエストボディ

```json
{
  "email": "admin@example.com",
  "password": "password123"
}
| パラメータ名   | 型   | 必須 | 説明          |
| -------- | --- | -- | ----------- |
| email    | 文字列 | 必須 | 管理者のメールアドレス |
| password | 文字列 | 必須 | パスワード       |
{
  "token": "admin-jwt-token",
  "admin": {
    "id": 1,
    "email": "admin@example.com",
    "name": "Admin Name"
  }
}
 ```
**処理概要**
- 入力値のバリデーション

- メールアドレス・パスワード照合（DB確認）

- 成功時にトークンを生成し、管理者情報と共に返却

**備考**
- トークンは今後の管理者向けAPI呼び出しに必要となる

---

### ■ 管理者ログアウトAPI

#### エンドポイント  
`POST /api/admin/auth/logout`

#### 機能概要  
現在ログイン中の管理者のセッションまたはトークンを無効化する。

#### リクエストヘッダー

| ヘッダー名       | 必須 | 内容                         |
|------------------|------|------------------------------|
| Authorization    | 必須 | Bearerトークン（管理者用）   |

#### リクエストボディ  
なし

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "message": "ログアウトしました。"
}
 ```
| ステータスコード         | 内容                  |
| ---------------- | ------------------- |
| 401 Unauthorized | 認証されていない or 無効なトークン |
| 403 Forbidden    | 管理者権限がないユーザーが実行     |

**処理概要**
- トークンの有効性と管理者権限を確認

- セッションまたはトークンを無効化

- 正常にログアウトできたことをメッセージで返却

**備考**
- 管理者専用のログアウトエンドポイント

- フロント側ではトークンを破棄する処理も必要

---

### ■ 商品登録API（管理者用）

#### エンドポイント  
`POST /api/admin/products`

#### 機能概要  
管理者が新規商品を登録する。

#### リクエストヘッダー

| ヘッダー名       | 必須 | 内容                         |
|------------------|------|------------------------------|
| Authorization    | 必須 | Bearerトークン（管理者用）   |
| Content-Type     | 必須 | application/json             |

#### リクエストボディ

```json
{
  "name": "商品名",
  "description": "商品の説明",
  "price": 1000,
  "categoryId": 1,
}
| パラメータ名      | 型   | 必須 | 説明        |
| ----------- | --- | -- | --------- |
| name        | 文字列 | 必須 | 商品名       |
| description | 文字列 | 任意 | 商品の詳細説明   |
| price       | 数値  | 必須 | 価格（単位は円）  |
| categoryId  | 数値  | 必須 | 所属カテゴリのID |
{
  "id": 123,
  "name": "商品名",
  "description": "商品の説明",
  "price": 1000,
  "categoryId": 1,
  "createdAt": "2025-07-07T10:00:00Z",
  "updatedAt": "2025-07-07T10:00:00Z"
}
 ```
| ステータスコード         | 内容               |
| ---------------- | ---------------- |
| 400 Bad Request  | 入力値が不正（例：必須項目不足） |
| 401 Unauthorized | 認証されていない         |
| 403 Forbidden    | 管理者権限がない         |

**処理概要**
- 管理者認証・権限チェック

- 入力データのバリデーション

- DBに新規商品レコードを登録

- 登録完了した商品情報を返却

**備考**
- 画像登録は別API（`POST /api/admin/products/{productId}/images`）で行う

---

### ■ 商品編集API（管理者用）

#### エンドポイント  
`PUT /api/admin/products/{productId}`

#### 機能概要  
管理者が指定した商品IDの商品情報を更新する。

#### パスパラメータ

| パラメータ名 | 型     | 必須 | 説明           |
|--------------|--------|------|----------------|
| productId    | 数値   | 必須 | 更新対象の商品ID |

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                       |
|---------------|------|----------------------------|
| Authorization | 必須 | Bearerトークン（管理者用） |
| Content-Type  | 必須 | application/json           |

#### リクエストボディ

```json
{
  "name": "更新後の商品名",
  "description": "更新後の説明",
  "price": 1200,
  "categoryId": 2,
}
| パラメータ名      | 型   | 必須 | 説明     |
| ----------- | --- | -- | ------ |
| name        | 文字列 | 任意 | 商品名    |
| description | 文字列 | 任意 | 商品説明   |
| price       | 数値  | 任意 | 価格（円）  |
| categoryId  | 数値  | 任意 | カテゴリID |
{
  "id": 123,
  "name": "更新後の商品名",
  "description": "更新後の説明",
  "price": 1200,
  "categoryId": 2,
  "createdAt": "2025-07-07T10:00:00Z",
  "updatedAt": "2025-07-07T12:00:00Z"
}
 ```
| ステータスコード         | 内容              |
| ---------------- | --------------- |
| 400 Bad Request  | 入力値が不正          |
| 401 Unauthorized | 認証されていない        |
| 403 Forbidden    | 管理者権限がない        |
| 404 Not Found    | productIdが存在しない |

**処理概要**
- 管理者認証・権限チェック

- productIdの存在確認

- 入力値バリデーション

- DBの該当商品情報を更新

- 更新後の商品情報を返却

**備考**
- 商品画像の変更は別APIで対応（`POST /api/admin/products/{productId}/images`）

---

### ■ 注文一覧取得API（管理者用）

#### エンドポイント  
`GET /api/admin/orders`

#### 機能概要  
管理者が全注文の一覧を取得する。

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                       |
|---------------|------|----------------------------|
| Authorization | 必須 | Bearerトークン（管理者用） |

#### クエリパラメータ（任意）

| パラメータ名 | 型     | 説明                           |
|--------------|--------|--------------------------------|
| page         | 数値   | ページ番号（デフォルト: 1）     |
| perPage      | 数値   | 1ページあたりの件数（デフォルト: 20） |
| status       | 文字列 | 注文状態フィルタ（例: "pending", "shipped"） |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "orders": [
    {
      "orderId": 101,
      "customerId": 10,
      "orderDate": "2025-07-06T14:30:00Z",
      "status": "pending",
      "totalAmount": 5400
    },
    {
      "orderId": 102,
      "customerId": 12,
      "orderDate": "2025-07-06T15:00:00Z",
      "status": "shipped",
      "totalAmount": 3200
    }
  ],
  "nextCursor": 102,
  "hasMore": true
}

 ```
| ステータスコード         | 内容       |
| ---------------- | -------- |
| 401 Unauthorized | 認証されていない |
| 403 Forbidden    | 管理者権限がない |

**処理概要**
- 管理者認証・権限チェック

- クエリパラメータの検証・設定

- DBから注文情報を取得（フィルタ適用含む）

- 注文一覧とページ情報を返却

**備考**
- 詳細な注文情報は別API（注文詳細取得API）で取得する。

---

### ■ 注文詳細取得API（管理者用）

#### エンドポイント  
`GET /api/admin/orders/{orderId}`

#### 機能概要  
管理者が指定した注文の詳細情報を取得する。

#### パスパラメータ

| パラメータ名 | 型   | 必須 | 説明               |
|--------------|------|------|--------------------|
| orderId      | 数値 | 必須 | 取得対象の注文ID   |

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                       |
|---------------|------|----------------------------|
| Authorization | 必須 | Bearerトークン（管理者用） |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "orderId": 101,
  "customerId": 10,
  "orderDate": "2025-07-06T14:30:00Z",
  "status": "pending",
  "totalAmount": 5400,
  "shipaddress": {
    "postalCode": "123-4567",
    "address1": "東京都新宿区",
    "address2": "西新宿1-1-1",
    "recipientName": "山田 太郎"
  },
  "products": [
    {
      "productId": 201,
      "productName": "商品A",
      "quantity": 2,
      "unitPrice": 1500,
      "subtotal": 3000
    },
    {
      "productId": 202,
      "productName": "商品B",
      "quantity": 1,
      "unitPrice": 2400,
      "subtotal": 2400
    }
  ],
  "paymentMethod": "代引き"
}
 ```
| ステータスコード         | 内容                |
| ---------------- | ----------------- |
| 401 Unauthorized | 認証されていない          |
| 403 Forbidden    | 管理者権限がない          |
| 404 Not Found    | 指定したorderIdが存在しない |

**処理概要**
- 管理者認証・権限チェック

- orderIdの存在確認

- 注文情報・配送先・注文商品の取得

- 詳細情報をレスポンスとして返却

**備考**
- 注文情報の編集は別APIで実施。

---

### ■ カート商品追加API

#### エンドポイント  
`POST /api/cart/products`

#### 機能概要  
ログイン中のユーザーのカートに商品を追加する。

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                         |
|---------------|------|------------------------------|
| Authorization | 必須 | Bearerトークン（ユーザー用） |

#### リクエストボディ（JSON）

```json
{
  "productId": 123,
  "quantity": 2,
  "options": {
    "color": "red",
    "size": "M"
  }
}
| 項目名       | 型      | 必須 | 説明                |
| --------- | ------ | -- | ----------------- |
| productId | 数値     | 必須 | 追加する商品のID         |
| quantity  | 数値     | 必須 | 追加数量（1以上）         |
| options   | オブジェクト | 任意 | 商品の選択肢（例：色、サイズなど） |
{
  "cartItemId": 456,
  "productId": 123,
  "quantity": 2,
  "options": {
    "color": "red",
    "size": "M"
  },
  "message": "カートに商品を追加しました。"
}
 ```
| ステータスコード         | 内容         |
| ---------------- | ---------- |
| 401 Unauthorized | 認証されていない場合 |
| 403 Forbidden    | 管理者権限がない場合 |

**処理概要**
- 管理者認証・権限チェック

- クエリパラメータ（cursor, limitなど）の検証と初期値設定

- データベースからカーソルベースで注文情報を取得

- 注文情報と次ページ用のnextCursor、hasMoreフラグを返却

**備考**
- クライアント側は nextCursor を次回リクエスト時のパラメータとして送信することで連続取得が可能

- hasMore が false の場合、それ以上のデータは存在しない

- 注文の詳細情報は「注文詳細取得API」で個別に取得

- nextCursor は通常、ソートキー（例：orderId や orderDate）を用いる

---

### ■ カート商品更新API

#### エンドポイント  
`PUT /api/cart/products/{productId}`

#### 機能概要  
カート内の指定商品（itemId）の数量や選択肢（オプション）を更新する。

#### パスパラメータ

| パラメータ名 | 必須 | 内容                     |
|--------------|------|--------------------------|
| productId       | 必須 | 更新対象のカート商品ID  |

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                         |
|---------------|------|------------------------------|
| Authorization | 必須 | Bearerトークン（ユーザー用） |

#### リクエストボディ（JSON）

```json
{
  "quantity": 3,
  "options": {
    "color": "blue",
    "size": "L"
  }
}
| 項目名      | 型      | 必須 | 説明          |
| -------- | ------ | -- | ----------- |
| quantity | 数値     | 必須 | 更新後の数量（1以上） |
| options  | オブジェクト | 任意 | 更新後の商品の選択肢  |
{
  "productId": 456,
  "productId": 123,
  "quantity": 3,
  "options": {
    "color": "blue",
    "size": "L"
  },
  "message": "カート商品を更新しました。"
}
 ```
| ステータスコード         | 内容                  |
| ---------------- | ------------------- |
| 400 Bad Request  | quantityが不正、パラメータ不足 |
| 401 Unauthorized | 認証されていない            |
| 404 Not Found    | productIdが存在しない        |

**処理概要**
- ユーザー認証

- パスパラメータ・リクエストボディのバリデーション

- 指定productIdがユーザーのカートに存在するか確認

- 更新処理実行

- 更新結果を返却

**備考**
- 数量を0にするとエラーとなる。削除は別APIを利用。

---

### ■ カート商品削除API

#### エンドポイント  
`DELETE /api/cart/products/{productId}`

#### 機能概要  
カート内の指定商品（productId）を削除する。

#### パスパラメータ

| パラメータ名 | 必須 | 内容                     |
|--------------|------|--------------------------|
| productId       | 必須 | 削除対象のカート商品ID  |

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                         |
|---------------|------|------------------------------|
| Authorization | 必須 | Bearerトークン（ユーザー用） |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "productId": 456,
  "message": "カート商品を削除しました。"
}
 ```
| ステータスコード         | 内容           |
| ---------------- | ------------ |
| 401 Unauthorized | 認証されていない     |
| 404 Not Found    | productIdが存在しない |

**処理概要**
- ユーザー認証

- productIdの所有権チェック

- カート商品削除処理

- 削除完了メッセージ返却

**備考**
- 削除後のカート状態は別途取得APIで確認可能。

---

### ■ 管理者ログインAPI

#### エンドポイント  
`POST /api/admin/auth/login`

#### 機能概要  
管理者ユーザーがメールアドレスとパスワードでログインし、認証トークンを取得する。

#### リクエストボディ（JSON）

```json
{
  "email": "admin@example.com",
  "password": "password123"
}
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "adminId": 1,
  "message": "管理者ログイン成功"
}
 ```
| ステータスコード         | 内容                |
| ---------------- | ----------------- |
| 400 Bad Request  | リクエストフォーマット不正     |
| 401 Unauthorized | メールアドレスまたはパスワード不正 |

**処理概要**
- リクエストのバリデーション

- 管理者ユーザーの認証（メール・パスワード照合）

- トークン生成（JWTなど）

- レスポンスにトークンと管理者IDを返却

**備考**
- 以降の管理者用API呼び出し時は、Authorizationヘッダーに取得したトークンを付与すること。

---

### ■ 管理者ログアウトAPI

#### エンドポイント  
`POST /api/admin/auth/logout`

#### 機能概要  
管理者の認証トークンを無効化し、ログアウト処理を行う。

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                         |
|---------------|------|------------------------------|
| Authorization | 必須 | Bearer トークン（管理者用）   |


#### 成功レスポンス（HTTP 200 OK）

```json
{
  "message": "管理者ログアウト成功"
}
 ```
| ステータスコード         | 内容              |
| ---------------- | --------------- |
| 401 Unauthorized | トークンが無効または認証エラー |

**処理概要**
- トークンの検証

- トークンの無効化

- 成功メッセージの返却

**備考**
- ログアウト後は管理者用APIを利用できなくなる。

---

### ■ 商品登録API（管理者用）

#### エンドポイント  
`POST /api/admin/products`

#### 機能概要  
管理者が新しい商品を登録する。

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                       |
|---------------|------|----------------------------|
| Authorization | 必須 | Bearer トークン（管理者用） |

#### リクエストボディ（JSON）

```json
{
  "name": "商品名",
  "description": "商品の説明",
  "price": 1000,
  "categoryId": 3,
  "attributes": {
    "color": "赤",
    "size": "M"
  }
}
{
  "productId": 123,
  "message": "商品を登録しました。"
}
　```
| ステータスコード         | 内容     |
| ---------------- | ------ |
| 400 Bad Request  | 入力値エラー |
| 401 Unauthorized | 認証エラー  |

**処理概要**
- 管理者認証チェック

- リクエストボディのバリデーション

- 商品データのDB登録

- 登録成功レスポンス返却

**備考**
- 商品画像は別APIで追加可能。

---

### ■ カート商品更新API

#### エンドポイント  
`PUT /api/admin/products/{productId}`

#### 機能概要  
管理者が既存の商品情報を更新する。

#### パスパラメータ

| パラメータ名 | 必須 | 内容               |
|--------------|------|--------------------|
| productId    | 必須 | 更新対象の商品ID   |

---

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                       |
|---------------|------|----------------------------|
| Authorization | 必須 | Bearer トークン（管理者用） |

#### リクエストボディ（JSON）

```json
{
  "name": "更新後の商品名",
  "description": "更新後の説明",
  "price": 1200,
  "categoryId": 5,
  "attributes": {
    "color": "青",
    "size": "L"
  }
}
{
  "message": "商品情報を更新しました。"
}
 ```
| ステータスコード         | 内容              |
| ---------------- | --------------- |
| 400 Bad Request  | 入力値エラー          |
| 401 Unauthorized | 認証エラー           |
| 404 Not Found    | productIdが存在しない |

**処理概要**
- 管理者認証チェック

- productId存在確認

- リクエストボディのバリデーション

- 商品情報のDB更新

- 更新成功レスポンス返却

**備考**
- 商品画像は別APIで管理。

---

### ■ 注文一覧取得API（管理者用）

#### エンドポイント  
`GET /api/admin/orders`

#### 機能概要  
管理者が全注文の一覧を取得する。

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                       |
|---------------|------|----------------------------|
| Authorization | 必須 | Bearer トークン（管理者用） |


#### 成功レスポンス（HTTP 200 OK）

```json
{
  "orders": [
    {
      "orderId": 101,
      "customerName": "山田 太郎",
      "orderDate": "2025-07-07T10:00:00Z",
      "status": "pending",
      "totalAmount": 5000
    },
    {
      "orderId": 102,
      "customerName": "鈴木 花子",
      "orderDate": "2025-07-06T14:30:00Z",
      "status": "shipped",
      "totalAmount": 12000
    }
  ],
  "hasMore": true,
  "nextCursor": 102
}
 ```
| ステータスコード         | 内容    |
| ---------------- | ----- |
| 401 Unauthorized | 認証エラー |

**処理概要**
- 管理者認証チェック

- 無限スクロールおよびフィルタリング処理

- 注文一覧のDB取得

- 取得結果のレスポンス返却

---


### ■ 注文詳細取得API（管理者用）

#### エンドポイント  
`GET /api/admin/orders/{orderId}`

#### 機能概要  
管理者が特定の注文詳細情報を取得する。

#### パスパラメータ

| パラメータ名 | 内容               | 必須 |
|--------------|--------------------|------|
| orderId      | 取得対象の注文ID   | 必須 |

## リクエストヘッダー

| ヘッダー名    | 必須 | 内容                       |
|---------------|------|----------------------------|
| Authorization | 必須 | Bearer トークン（管理者用） |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "orderId": 101,
  "customerId": 501,
  "customerName": "山田 太郎",
  "orderDate": "2025-07-07T10:00:00Z",
  "status": "pending",
  "totalAmount": 5000,
  "products": [
    {
      "productId": 301,
      "productName": "商品A",
      "quantity": 2,
      "price": 2000
    },
    {
      "productId": 302,
      "productName": "商品B",
      "quantity": 1,
      "price": 1000
    }
  ],
  "shipaddress": "東京都新宿区1-2-3",
  "paymentMethod": "代引き"
}
 ```
| ステータスコード         | 内容              |
| ---------------- | --------------- |
| 401 Unauthorized | 認証エラー           |
| 404 Not Found    | 指定orderIdが存在しない |

**処理概要**
- 管理者認証チェック

- orderIdの存在チェック

- 注文情報と注文商品のDB取得

- 取得結果のレスポンス返却

**備考**
- 管理者のみ利用可能。

---

### ■ カート商品追加API

#### エンドポイント  
`POST /api/cart/products`

#### 機能概要  
ログイン中のユーザーのカートに商品を追加する。

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                       |
|---------------|------|----------------------------|
| Authorization | 必須 | Bearer トークン（ユーザー用） |

#### リクエストボディ（JSON）

```json
{
  "productId": 123,
  "quantity": 2,
  "attributes": {
    "color": "red",
    "size": "M"
  }
}
| 項目         | 内容        | 必須 | 備考      |
| ---------- | --------- | -- | ------- |
| productId  | 追加する商品のID | 必須 |         |
| quantity   | 数量        | 必須 | 1以上     |
| attributes | 商品の属性（任意） | 任意 | 色やサイズなど |
{
  "productId": 456,
  "productId": 123,
  "quantity": 2,
  "attributes": {
    "color": "red",
    "size": "M"
  },
  "message": "カートに商品を追加しました。"
}
 ```
**処理概要**
- ユーザー認証チェック

- リクエストボディのバリデーション

- productIdの存在チェック

- カート内に同じ商品（属性含む）があれば数量を加算、なければ新規追加

- 更新後のカート商品情報を返却

**備考**
- ログインユーザー専用API。

---

### ■ カート商品更新API


#### エンドポイント  
`PUT /api/cart/products/{productId}`

#### 機能概要  
カート内の特定商品（productId）の数量や属性を更新する。

#### パスパラメータ

| パラメータ | 内容               | 必須 |
|------------|--------------------|------|
| productId     | 更新対象のカート内商品ID | 必須 |


#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                       |
|---------------|------|----------------------------|
| Authorization | 必須 | Bearer トークン（ユーザー用） |

#### リクエストボディ（JSON）

```json
{
  "quantity": 3,
  "attributes": {
    "color": "blue",
    "size": "L"
  }
}
| 項目         | 内容           | 必須 | 備考      |
| ---------- | ------------ | -- | ------- |
| quantity   | 更新後の数量       | 必須 | 1以上     |
| attributes | 更新後の属性情報（任意） | 任意 | 色やサイズなど |
{
  "productId": 456,
  "productId": 123,
  "quantity": 3,
  "attributes": {
    "color": "blue",
    "size": "L"
  },
  "message": "カート商品を更新しました。"
}
 ```
| ステータスコード         | 内容                       |
| ---------------- | ------------------------ |
| 400 Bad Request  | 不正なパラメータ（例：quantityが0以下） |
| 401 Unauthorized | 未ログインまたは認証エラー            |
| 404 Not Found    | productIdが存在しない             |

**処理概要**
- ユーザー認証チェック

- productIdの存在確認と所有者チェック

- リクエストボディのバリデーション

- カート商品情報を更新

- 更新後のカート商品情報を返却

**備考**
- ログインユーザー専用API。


---
### ■ カート商品削除API


#### エンドポイント  
`DELETE /api/cart/products/{productId}`

#### 機能概要  
カート内の特定商品（productId）を削除する。

#### パスパラメータ

| パラメータ | 内容               | 必須 |
|------------|--------------------|------|
| productId     | 削除対象のカート内商品ID | 必須 |

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                       |
|---------------|------|----------------------------|
| Authorization | 必須 | Bearer トークン（ユーザー用） |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "message": "カート商品を削除しました。"
}
 ```
| ステータスコード         | 内容            |
| ---------------- | ------------- |
| 401 Unauthorized | 未ログインまたは認証エラー |
| 404 Not Found    | productIdが存在しない  |

**処理概要**
- ユーザー認証チェック

- productIdの存在確認

- カート内商品削除処理

- 削除完了メッセージ返却

**備考**
- ログインユーザー専用API

---

### ■ 管理者ログインAPI


#### エンドポイント  
`POST /api/admin/auth/login`

#### 機能概要  
管理者がメールアドレスとパスワードでログインし、管理用トークンを取得する。


#### リクエストボディ（JSON）

```json
{
  "email": "admin@example.com",
  "password": "password123"
}
| 項目       | 内容          | 必須 |
| -------- | ----------- | -- |
| email    | 管理者のメールアドレス | 必須 |
| password | パスワード       | 必須 |
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "message": "管理者ログイン成功"
}
 ```
| ステータスコード         | 内容            |
| ---------------- | ------------- |
| 401 Unauthorized | 認証情報が間違っている場合 |
| 400 Bad Request  | リクエスト不正       |

**処理概要**
- 入力された認証情報のバリデーション

- 管理者アカウントの存在・パスワード検証

- 認証トークン発行

- トークンをレスポンスに返却

**備考**
- 管理者専用API。

- 発行トークンは管理者操作時の認証に利用。

---

### ■ 管理者ログアウトAPI


#### エンドポイント  
`POST /api/admin/auth/logout`

#### 機能概要  
管理者のセッションまたはトークンを無効化し、ログアウト処理を行う。


#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                           |
|---------------|------|--------------------------------|
| Authorization | 必須 | Bearer トークン（管理者用）     |


#### 成功レスポンス（HTTP 200 OK）

```json
{
  "message": "管理者ログアウト成功"
}
 ```
| ステータスコード         | 内容            |
| ---------------- | ------------- |
| 401 Unauthorized | トークンが無効または未認証 |

**処理概要**
- トークンの有効性チェック

- トークンの無効化処理

- ログアウト成功メッセージ返却

**備考**
- 管理者専用API。

- セッションやトークンの種類により無効化方法は異なる場合あり。

---

### ■ 商品登録API（管理者用）

#### エンドポイント  
`POST /api/admin/products`

#### 機能概要  
管理者が新しい商品を登録する。

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                        |
|---------------|------|-----------------------------|
| Authorization | 必須 | Bearer トークン（管理者用）  |
| Content-Type  | 必須 | application/json            |

#### リクエストボディ例

```json
{
  "name": "商品名",
  "description": "商品の説明",
  "price": 1000,
  "categoryId": 1,
  "attributes": {
    "color": "赤",
    "size": "M"
  }
}
{
  "productId": 123,
  "message": "商品を登録しました。"
}
 ```
| ステータスコード         | 内容             |
| ---------------- | -------------- |
| 400 Bad Request  | 入力不正（必須項目不足など） |
| 401 Unauthorized | 認証エラー（管理者でない等） |

**処理概要**
- 管理者認証チェック

- リクエストデータバリデーション

- 商品情報のDB登録

- 登録成功レスポンス返却

**備考**
- 商品画像は別APIで追加する。

---

### ■ 商品編集API（管理者用）

#### エンドポイント  
`PUT /api/admin/products/{productId}`

#### 機能概要  
管理者が既存の商品情報を更新する。

#### パスパラメータ

| パラメータ名 | 必須 | 内容              |
|--------------|------|-------------------|
| productId    | 必須 | 更新対象の商品ID  |

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                         |
|---------------|------|------------------------------|
| Authorization | 必須 | Bearer トークン（管理者用）   |
| Content-Type  | 必須 | application/json             |

#### リクエストボディ例

```json
{
  "name": "更新後の商品名",
  "description": "更新後の説明",
  "price": 1500,
  "categoryId": 2,
  "attributes": {
    "color": "青",
    "size": "L"
  }
}
{
  "message": "商品情報を更新しました。"
}
 ```
| ステータスコード         | 内容              |
| ---------------- | --------------- |
| 400 Bad Request  | 入力不正            |
| 401 Unauthorized | 認証エラー           |
| 404 Not Found    | productIdが存在しない |

**処理概要**
- 管理者認証チェック

- productId存在チェック

- リクエストデータバリデーション

- 商品情報更新処理

- 更新成功レスポンス返却

**備考**
- 商品画像は別APIで管理する。

---

### ■ 注文一覧取得API（管理者用）

#### エンドポイント  
`GET /api/admin/orders`

#### 機能概要  
管理者が全注文の一覧を取得する。

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                       |
|---------------|------|----------------------------|
| Authorization | 必須 | Bearer トークン（管理者用） |
```json
{
  "orders": [
    {
      "orderId": 123,
      "customerId": 456,
      "orderDate": "2025-07-01T12:34:56Z",
      "status": "pending",
      "totalAmount": 5000
    },
    {
      "orderId": 124,
      "customerId": 789,
      "orderDate": "2025-07-02T10:20:30Z",
      "status": "shipped",
      "totalAmount": 3000
    }
  ],
  "hasMore": true,
  "nextCursor": 124
}
 ```
| ステータスコード         | 内容    |
| ---------------- | ----- |
| 401 Unauthorized | 認証エラー |

**処理概要**
- 管理者認証チェック

- クエリパラメータのバリデーション（例：cursorやlimit）

- 注文データの取得・無限スクロール用カーソル処理

- レスポンス返却

---

### ■ 注文詳細取得API（管理者用）

#### エンドポイント  
`GET /api/admin/orders/{orderId}`

#### 機能概要  
管理者が特定の注文詳細を取得する。

#### パスパラメータ

| パラメータ名 | 必須 | 内容            |
|--------------|------|-----------------|
| orderId      | 必須 | 取得対象の注文ID |

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                        |
|---------------|------|-----------------------------|
| Authorization | 必須 | Bearer トークン（管理者用）  |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "orderId": 123,
  "customerId": 456,
  "orderDate": "2025-07-01T12:34:56Z",
  "status": "pending",
  "totalAmount": 5000,
  "products": [
    {
      "productId": 789,
      "productName": "商品A",
      "quantity": 2,
      "unitPrice": 2000
    },
    {
      "productId": 101,
      "productName": "商品B",
      "quantity": 1,
      "unitPrice": 1000
    }
  ],
  "shipaddress": {
    "name": "山田 太郎",
    "postalCode": "123-4567",
    "addressLine1": "東京都新宿区西新宿1-1-1",
    "addressLine2": "マンション101"
  }
}
 ```
| ステータスコード         | 内容            |
| ---------------- | ------------- |
| 401 Unauthorized | 認証エラー         |
| 404 Not Found    | orderIdが存在しない |

**処理概要**
- 管理者認証チェック

- orderId存在チェック

- 注文詳細データ取得

- レスポンス返却

**備考**
- 注文の各商品の詳細を含む。

---

### ■ カート商品追加API

#### エンドポイント  
`POST /api/cart/products`

#### 機能概要  
ログイン中のユーザーのカートに商品を追加する。

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                       |
|---------------|------|----------------------------|
| Authorization | 必須 | Bearer トークン（ユーザー用） |

#### リクエストボディ（JSON）

| フィールド名 | 型     | 必須 | 内容                       |
|--------------|--------|------|----------------------------|
| productId    | int| 必須 | 追加する商品のID           |
| quantity     | int| 必須 | 追加する数量（1以上）      |
| options      | object | 任意 | 商品のオプション（例: 色、サイズ） |

#### 成功レスポンス（HTTP 201 Created）

```json
{
  "productId": 987,
  "productId": 123,
  "quantity": 2,
  "options": {
    "color": "red",
    "size": "M"
  },
  "message": "カートに商品を追加しました。"
}
 ```
| ステータスコード         | 内容                     |
| ---------------- | ---------------------- |
| 400 Bad Request  | quantityが1未満など不正なパラメータ |
| 401 Unauthorized | 認証エラー                  |
| 404 Not Found    | productIdが存在しない        |

**処理概要**
- ユーザー認証チェック

- productIdの存在確認

- quantityのバリデーション

- カート内に同一商品・同一オプションがあれば数量を加算、なければ新規追加

- レスポンス返却

---

### ■ カート商品更新API


#### エンドポイント  
`PUT /api/cart/products/{productId}`

#### 機能概要  
カート内の特定商品アイテムの数量や属性を更新する。

#### パスパラメータ

| パラメータ名 | 型     | 必須 | 内容                   |
|--------------|--------|------|------------------------|
| productId       | int| 必須 | 更新対象のカート内商品ID |

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                       |
|---------------|------|----------------------------|
| Authorization | 必須 | Bearer トークン（ユーザー用） |

#### リクエストボディ（JSON）

| フィールド名 | 型     | 必須 | 内容                         |
|--------------|--------|------|------------------------------|
| quantity     | int| 必須 | 更新後の数量（1以上）        |
| options      | object | 任意 | 更新後の商品のオプション情報 |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "productId": 987,
  "quantity": 3,
  "options": {
    "color": "blue",
    "size": "L"
  },
  "message": "カート内の商品を更新しました。"
}
 ```
| ステータスコード         | 内容                      |
| ---------------- | ----------------------- |
| 400 Bad Request  | quantityが不正、またはパラメータエラー |
| 401 Unauthorized | 認証エラー                   |
| 404 Not Found    | itemIdがカートに存在しない        |

**処理概要**
- ユーザー認証チェック

- productIdがユーザーのカート内に存在するか確認

- quantityのバリデーション

- カート商品の数量・オプション更新

- レスポンス返却

**備考**
- 数量を0にする場合は削除APIを利用すること。

---

### ■ カート商品削除API

#### エンドポイント  
`DELETE /api/cart/products/{productId}`

#### 機能概要  
カート内の特定商品アイテムを削除する。

#### パスパラメータ

| パラメータ名 | 型     | 必須 | 内容                   |
|--------------|--------|------|------------------------|
| productId       | int| 必須 | 削除対象のカート内商品ID |

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                       |
|---------------|------|----------------------------|
| Authorization | 必須 | Bearer トークン（ユーザー用） |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "message": "カート内の商品を削除しました。"
}
 ```
| ステータスコード         | 内容               |
| ---------------- | ---------------- |
| 401 Unauthorized | 認証エラー            |
| 404 Not Found    | productIdがカートに存在しない |
| ステータスコード         | 内容               |
| ---------------- | ---------------- |
| 401 Unauthorized | 認証エラー            |
| 404 Not Found    | productIdがカートに存在しない |

**処理概要**
- ユーザー認証チェック

- productIdがユーザーのカート内に存在するか確認

- カート商品削除処理実行

- レスポンス返却

**備考**
- 管理者用APIではなく、ユーザーのカート操作専用。

---

### ■ 管理者ログインAPI

#### エンドポイント  
`POST /api/admin/auth/login`

#### 機能概要  
管理者用のログイン処理。管理者IDとパスワードで認証を行い、認証トークンを発行する。

#### リクエストボディ

| パラメータ名 | 型     | 必須 | 内容           |
|--------------|--------|------|----------------|
| adminId      | string | 必須 | 管理者ID       |
| password     | string | 必須 | パスワード     |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "expires_in": 3600
}
 ```
| ステータスコード         | 内容   |
| ---------------- | ---- |
| 401 Unauthorized | 認証失敗 |

**処理概要**
- 管理者ID・パスワードの照合

- 認証成功時、JWT等の認証トークンを発行

- トークンと有効期限をレスポンスで返却

**備考**
- 認証トークンは以降の管理者用API呼び出し時にAuthorizationヘッダーで使用。

---

### ■ 管理者ログアウトAPI

#### エンドポイント  
`POST /api/admin/auth/logout`

#### 機能概要  
管理者のログアウト処理。発行済みの認証トークンを無効化する。

#### リクエストヘッダー

| ヘッダー名    | 必須 | 内容                       |
|---------------|------|----------------------------|
| Authorization | 必須 | Bearer トークン（管理者用） |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "message": "管理者をログアウトしました。"
}
 ```
| ステータスコード         | 内容    |
| ---------------- | ----- |
| 401 Unauthorized | 認証エラー |

**処理概要**
- 認証トークンの有効性確認

- トークン無効化処理

- ログアウト完了レスポンス返却

**備考**
- トークン無効化はトークンのブラックリスト登録やセッション削除で対応。

---

### ■ 商品登録API（管理者用）

#### エンドポイント  
`POST /api/admin/products`

#### 機能概要  
新しい商品を管理者が登録する。

#### リクエストボディ

| パラメータ名    | 型      | 必須 | 内容                        |
|-----------------|---------|------|-----------------------------|
| name            | string  | 必須 | 商品名                     |
| description     | string  | 任意 | 商品説明                   |
| price           | decimal  | 必須 | 価格（整数、単位は円）     |
| categoryId      | int | 必須 | カテゴリID                 |

#### 成功レスポンス（HTTP 201 Created）

```json
{
  "productId": 123,
  "message": "商品を登録しました。"
}
 ```
| ステータスコード         | 内容           |
| ---------------- | ------------ |
| 400 Bad Request  | リクエストパラメータ不正 |
| 401 Unauthorized | 認証失敗         |

**処理概要**
- 管理者認証チェック

- リクエストパラメータ検証

- 商品情報をDBに登録

- 登録成功レスポンスを返却

**備考**
- 商品画像は別APIで追加可能。

---

### ■ 商品編集API（管理者用）

#### エンドポイント  
`PUT /api/admin/products/{productId}`

#### 機能概要  
既存の商品情報を更新する（管理者専用）。


#### パスパラメータ

| パラメータ名 | 型      | 必須 | 内容            |
|--------------|---------|------|-----------------|
| productId    | int | 必須 | 更新対象の商品ID |

#### リクエストボディ

| パラメータ名  | 型      | 必須 | 内容                          |
|---------------|---------|------|-------------------------------|
| name          | string  | 任意 | 商品名                       |
| description   | string  | 任意 | 商品説明                     |
| price         | decimal  | 任意 | 価格（整数、単位は円）       |
| categoryId    | int | 任意 | カテゴリID                   |

---

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "message": "商品情報を更新しました。"
}
 ```
| ステータスコード         | 内容                  |
| ---------------- | ------------------- |
| 400 Bad Request  | リクエストパラメータ不正        |
| 401 Unauthorized | 認証失敗                |
| 404 Not Found    | 指定したproductIdが存在しない |

**処理概要**
- 管理者認証チェック

- productIdの存在確認

- リクエストボディのバリデーション

- DBの更新処理

- 更新成功レスポンス返却

**備考*
- 部分更新可能。

- 商品画像更新は別APIで対応。

---

### ■ 注文一覧取得API（管理者用）


#### エンドポイント  
`GET /api/admin/orders`

#### 機能概要  
全注文の一覧を取得する（管理者専用）。

#### クエリパラメータ（任意）

| パラメータ名 | 型     | 必須 | 内容                         |
|--------------|--------|------|------------------------------|
| status       | string | 任意 | 注文状態で絞り込み（例: pending, shipped, completed） |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "orders": [
    {
      "orderId": 123,
      "customerId": 456,
      "orderDate": "2025-07-01T12:34:56Z",
      "status": "pending",
      "totalAmount": 12345
    },
    {
      "orderId": 124,
      "customerId": 457,
      "orderDate": "2025-07-02T08:10:11Z",
      "status": "shipped",
      "totalAmount": 67890
    }
  ],
}
 ```
| ステータスコード         | 内容      |
| ---------------- | ------- |
| 401 Unauthorized | 認証失敗    |
| 403 Forbidden    | 管理者権限なし |

**処理概要**
- 管理者認証チェック

- クエリパラメータのバリデーション

- DBから注文一覧取得

- 注文リストをレスポンス返却

---

### ■ 注文詳細取得API（管理者用）

#### エンドポイント  
`GET /api/admin/orders/{orderId}`

#### 機能概要  
指定した注文IDの詳細情報を取得する（管理者専用）。


#### パスパラメータ

| パラメータ名 | 型     | 必須 | 内容               |
|--------------|--------|------|--------------------|
| orderId      | int| 必須 | 取得対象の注文ID   |

#### 成功レスポンス（HTTP 200 OK）

```json
{
  "orderId": 123,
  "customerId": 456,
  "orderDate": "2025-07-01T12:34:56Z",
  "status": "pending",
  "totalAmount": 12345,
  "shipaddress": {
    "postalCode": "123-4567",
    "address": "東京都新宿区1-2-3",
    "recipientName": "山田 太郎"
  },
  "products": [
    {
      "productId": 789,
      "productName": "商品A",
      "quantity": 2,
      "unitPrice": 5000,
      "subtotal": 10000
    },
    {
      "productId": 790,
      "productName": "商品B",
      "quantity": 1,
      "unitPrice": 2345,
      "subtotal": 2345
    }
  ],
  "paymentMethod": "代引き"
}
 ```
| ステータスコード         | 内容              |
| ---------------- | --------------- |
| 401 Unauthorized | 認証失敗            |
| 403 Forbidden    | 管理者権限なし         |
| 404 Not Found    | 指定orderIdが存在しない |

**処理概要**
- 管理者認証チェック

- orderIdの存在確認

- 注文詳細情報をDBから取得

- レスポンス返却

**備考**
- 管理者のみ利用可能。


