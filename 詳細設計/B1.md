## 3. 機能設計

### 3.1. 機能一覧

- **認証機能**
  - ログイン/ログアウト機能
  - ユーザー情報登録機能
  - マイページ、登録情報表示、変更
- **商品表示機能**
  - 商品一覧ページ・カテゴリ別商品一覧表示
  - 商品詳細ページ・商品ID、写真、価格、素材、納期予定表示機能
  - 無限スクロール方式により商品表示件数を制御
- **カート機能**
  - 商品追加機能・商品削除機能・商品数量編集機能・カートアイコン反映機能
  - カート内商品表示機能
  - カート状態保持機能（セッション/ローカルストレージ対応）
  - 未ログイン状態でもカートを維持
- **注文機能**
  - 個人情報入力機能・入力確認画面表示
  - 注文情報
- **スマホ対応機能**
  - ページでレイアウト最適化表示・スマホ特有のUI機能
- **商品管理機能(管理者向け)**
  - 商品情報追加、削除機能・編集入力機能
  - 注文情報確認機能

### 3.2. 機能詳細

主要機能における、ユーザー操作から始まるフロントエンドとバックエンドAPI間の連携、およびバックエンド内部のクラス間連携の概要をシーケンス図で示します。

（APIの詳細な仕様は「５.インターフェース仕様（API）」を参照してください。

#### 3.2.1.  ログイン/ログアウト機能

ユーザーがECサイトにログインする際の処理フローです。


#### 3.2.2 ユーザー情報登録機能

新規ユーザーが会員情報を入力し、DBに登録するフローです。

【ここにシーケンス図】

#### 3.2.3 商品一覧表示機能

ユーザーが商品一覧ページにアクセスした際の処理フローです。

【ここにシーケンス図】

#### 3.2.4 商品詳細表示機能

ユーザーが商品一覧から特定の商品を選択し、詳細ページを表示する際の処理フローです。

【ここにシーケンス図】

#### 3.2.5 カート追加機能

ユーザーが商品詳細ページで「カートに入れる」ボタンを押した際の処理フローです。カート情報はHTTPセッションで管理します。

【ここにシーケンス図】

**補足:**

- カートオブジェクト (`Cart`) やカート内アイテム (`CartItem`) のクラス設計は「4. クラス設計」で定義します。
- Spring Boot標準のHttpSession利用を基本とします。

#### 3.2.6 カート表示・編集機能

ユーザーがカートの中身を確認、数量変更、削除する際の処理フローです。

**カート情報取得 (GET /api/cart)**

【ここにシーケンス図】

**カート数量変更 (PUT /api/cart/items/{itemId})**

【ここにシーケンス図】

**カート商品削除 (DELETE /api/cart/items/{itemId})** (上記PUTと同様の流れ)

#### 3.2.7 注文確定処理

ユーザーが注文確認画面で「注文を確定する」ボタンを押した際の処理フローです。


**補足:**

- `@Transactional` アノテーションを `OrderService#placeOrder` メソッドに付与し、DB操作の原子性を保証します。

## 4. クラス設計
